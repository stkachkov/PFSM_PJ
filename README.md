# Приложение для управления личными финансами (PFMS)

Консольное приложение на Java для управления личными финансами.

## Функциональные возможности

- **Аутентификация:** Регистрация и авторизация нескольких пользователей.
- **Управление транзакциями:** Добавление доходов и расходов.
- **Просмотр баланса:** Возможность в любой момент посмотреть текущий баланс.
- **Уведомления:** Оповещение, если общие расходы превышают общие доходы.
- **Категории:** Создание и использование категорий для транзакций.
- **Бюджетирование:** Установка, отслеживание и редактирование бюджетов по категориям.
- **Отчеты:**
    - Полный отчет по доходам, расходам и бюджетам.
    - Отчет по выбранным категориям с валидацией существующих категорий.
- **Переводы:** Перевод средств между пользователями.
- **Сохранение данных:** Данные пользователей и их кошельков сохраняются в файлы.
- **Экспорт:** Экспорт полного отчета в текстовый файл (`<login>_report.txt`).
- **Валидация ввода:** Проверка корректности вводимых данных.
- **Оповещения:** Уведомления о превышении бюджета и о достижении 80% лимита.

## Управление файлами данных

Приложение сохраняет данные пользователей (`users.dat`) и их кошельков (`<login>_wallet.dat`) в отдельной папке `data/` в корне проекта. Это помогает избежать загромождения основной директории проекта.

### Важное примечание для тестирования

Для обеспечения изоляции и предотвращения случайного удаления реальных данных, **все тесты используют временные директории** для хранения своих `.dat` файлов. Это означает, что запуск тестов (`mvn test`) не повлияет на файлы данных, используемые вашим основным приложением. Временные директории автоматически создаются перед каждым тестовым запуском и удаляются после его завершения.

## Архитектура

Проект имеет многослойную архитектуру:
- `com.myfinance.model` - классы данных (POJO).
- `com.myfinance.service.api` - интерфейсы сервисов.
- `com.myfinance.service` - реализация бизнес-логики.
- `com.myfinance.Main` - слой представления (UI), отвечает за взаимодействие с пользователем.

## Требования

- Java 11 (или выше)
- Apache Maven

## Сборка и запуск

1.  **Сборка проекта**
    В корневой папке проекта выполните команду для сборки исполняемого jar-файла:
    ```bash
    mvn clean package
    ```
    Это создаст файл `pfms.jar` в папке `target`.

2.  **Запуск приложения**
    Выполните следующую команду для запуска:
    ```bash
    java -jar target/pfms.jar
    ```

## Тестирование

Проект покрыт Unit-тестами (JUnit 5). Для запуска тестов выполните команду:
```bash
mvn test
```

## Импорт и Экспорт данных

Приложение поддерживает экспорт и импорт данных аккаунта (транзакции и бюджеты) в формате CSV. Это позволяет делать резервные копии и восстанавливать данные.

### Экспорт

При выборе пункта меню "Экспорт в CSV" в корневой папке проекта будут созданы два файла:
- `[логин]_transactions.csv` - все транзакции.
- `[логин]_budgets.csv` - все установленные бюджеты.

### Импорт

При выборе пункта меню "Импорт из CSV" приложение будет искать эти два файла в корневой папке.

**ВНИМАНИЕ:** Импорт **полностью заменяет** все текущие данные в вашем аккаунте.

#### Подготовка файлов для импорта

Для успешного импорта файлы должны соответствовать строгому формату.

**1. Файл транзакций (`[логин]_transactions.csv`)**
- Кодировка: `UTF-8`
- Разделитель: запятая `,`
- Колонки: `Type,Amount,Category`
- **Type:** `INCOME` (для дохода) или `EXPENSE` (для расхода).
- **Amount:** Положительное число с точкой в качестве десятичного разделителя (например, `123.45`).
- **Category:** Название категории.

*Пример:*
```csv
Type,Amount,Category
INCOME,50000.0,Зарплата
EXPENSE,1500.50,Еда
```

**2. Файл бюджетов (`[логин]_budgets.csv`)**
- Кодировка: `UTF-8`
- Разделитель: запятая `,`
- Колонки: `Category,Amount`
- **Category:** Название категории.
- **Amount:** Положительное число с точкой в качестве десятичного разделителя.

*Пример:*
```csv
Category,Amount
Еда,10000.0
Транспорт,3000.0
```
При несоответствии формата импорт будет прерван с сообщением об ошибке.

## Руководство пользователя

### Доступные команды

*   **Регистрация:**
    `1` в меню аутентификации

*   **Авторизация:**
    `2` в меню аутентификации

*   **Добавить доход:**
    `1` в главном меню

*   **Добавить расход:**
    `2` в главном меню

*   **Установить бюджет:**
    `3` в главном меню

*   **Показать отчет:**
    `4` в главном меню

*   **Отчет по категориям:**
    `5` в главном меню

*   **Экспорт отчета:**
    `6` в главном меню

*   **Перевести средства:**
    `7` в главном меню

*   **Редактировать бюджет:**
    `8` в главном меню

*   **Помощь:**
    `9` в главном меню

*   **Просмотр баланса:**
    `10` в главном меню

*   **Экспорт в CSV:**
    `11` в главном меню

*   **Импорт из CSV:**
    `12` в главном меню

*   **Выйти из аккаунта:**
    `13` в главном меню